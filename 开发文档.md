# fastcheck(fck)命令开发手册

fastcheck重构升级版

## 1. 接收参数格式

### 文件名
- **绝对路径**：`/home/user/1.txt`
- **相对路径**：`./1.txt`
- **当前目录文件**：`1.txt`

### 目录名
- **绝对路径**：`/home/user/test`
- **相对路径**：`./test`
- **当前目录**：`test`

### 通配符模式
- **任意文件**：`*`
- **当前目录所有文件**：`./ *` 或 `/*`
- **当前目录下所有扩展名为 `.txt` 的文件**：`*.txt` 或 `./ *.txt`
- **当前目录下所有文件和子目录**：`./`

### 正则表达式
- **匹配一个或多个数字**：`\d+`
- **匹配任意字符**：`.+`
- **匹配以特定字符开头的文件名**：`^abc.*`

## 2. 工作模式

| 工作模式       | 子命令  | 参数/标志               | 说明                            |
| -------------- | ------- | ----------------------- | ------------------------------- |
| 获取校验值模式 | `hash`  | `-f` 文件名             | 计算文件的校验值（如 MD5/SHA1） |
| 计算大小模式   | `size`  | `-f` 文件名             | 计算文件的大小                  |
| 校验模式       | `check` | `-f` 文件名 `-c` 校验值 | 校验文件是否与给定校验值匹配    |
| 检索模式       | `find`  | `-d` 目录名 `-p` 模式   | 在目录中检索匹配模式的文件      |

```powershell
# hash语法
fck hash [选项] <路径>

# size语法
fck size [选项] <路径>

# check语法
fck check [选项...]

# find 语法
fck find [选项...] 
```

## 3. 主命令全局选项

全局选项适用于所有子命令，用于控制命令的行为和输出格式。

| 选项 | 参数     | 说明                                 |
| ---- | -------- | ------------------------------------ |
| `-q` | 无       | 静默模式，仅输出关键结果             |
| `-o` | 输出文件 | 将结果输出到指定文件，而不是标准输出 |
| `-h` | 无       | 显示帮助信息并退出                   |
| `-v` | 无       | 打印版本并退出                       |

## 4. 工作模式

### 4.1 获取校验值模式

#### 子命令：`hash`

计算文件的校验值（如 MD5/SHA1）。

| 参数/选项 | 参数             | 说明                                                     |
| --------- | ---------------- | -------------------------------------------------------- |
| `-f`      | 文件路径         | 指定要计算校验值的文件                                   |
| `-a`      | 算法类型（可选） | 指定校验算法（如 `md5`、`sha1`、`sha256`），默认为 `md5` |
| `-r`      | 无               | 递归计算目录中所有文件的校验值（仅当输入为目录时有效）   |

#### 示例用法
```bash
# 计算单个文件的 MD5 校验值
fck hash -f /home/user/1.txt

# 计算单个文件的 SHA1 校验值
fck hash -f /home/user/1.txt -a sha1

# 递归计算目录中所有文件的 MD5 校验值
fck hash -f /home/user/test -r
```

### 4.2 计算大小模式

#### 子命令：`size`

计算文件的大小。

| 参数/选项 | 参数         | 说明                                                   |
| --------- | ------------ | ------------------------------------------------------ |
| `-f`      | 文件路径     | 指定要计算大小的文件                                   |
| `-u`      | 单位（可选） | 指定输出单位（如 `B`、`KB`、`MB`、`GB`），默认为 `B`   |
| `-r`      | 无           | 递归计算目录中所有文件的总大小（仅当输入为目录时有效） |

#### 示例用法
```bash
# 计算单个文件的大小（以字节为单位）
fck size -f /home/user/1.txt

# 计算单个文件的大小（以 MB 为单位）
fck size -f /home/user/1.txt -u MB

# 递归计算目录中所有文件的总大小（以字节为单位）
fck size -f /home/user/test -r
```

### 4.3 校验模式

#### 子命令：`check`

校验文件是否与给定校验值匹配。

| 参数/选项 | 参数             | 说明                                                     |
| --------- | ---------------- | -------------------------------------------------------- |
| `-f`      | 文件路径         | 指定要校验的文件                                         |
| `-c`      | 校验值           | 指定用于校验的值                                         |
| `-a`      | 算法类型（可选） | 指定校验算法（如 `md5`、`sha1`、`sha256`），默认为 `md5` |

#### 示例用法
```bash
# 校验文件的 MD5 值是否匹配
fck check -f /home/user/1.txt -c 1234567890abcdef

# 校验文件的 SHA1 值是否匹配
fck check -f /home/user/1.txt -c 1234567890abcdef -a sha1
```

### 4.4 检索模式

#### 子命令：`find`

在目录中检索匹配模式的文件。

| 参数/选项 | 参数               | 说明                                       |
| --------- | ------------------ | ------------------------------------------ |
| `-d`      | 目录路径           | 指定要检索的目录                           |
| `-p`      | 模式               | 指定检索模式（支持通配符和正则表达式）     |
| `-r`      | 无                 | 递归检索子目录中的文件                     |
| `-e`      | 正则表达式（可选） | 指定使用正则表达式模式（默认为通配符模式） |

#### 示例用法
```bash
# 在当前目录中检索所有扩展名为 .txt 的文件
fck find -d ./ -p *.txt

# 在指定目录中递归检索所有扩展名为 .txt 的文件
fck find -d /home/user/test -p *.txt -r

# 使用正则表达式检索以 "abc" 开头的文件
fck find -d /home/user/test -p ^abc.* -e
```